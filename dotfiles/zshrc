#!/usr/bin/env zsh

bindkey -e

unsetopt auto_cd
setopt auto_pushd
setopt beep
unsetopt extended_glob
setopt interactive_comments
setopt long_list_jobs
setopt multios  # TODO I don't understand this
setopt nomatch
unsetopt notify
setopt prompt_subst
setopt pushd_ignore_dups

export PS1='%n@%m:%~
$ '

source "${HOME}"/dotfiles/history.zsh
source "${HOME}"/dotfiles/interactive_exports.bash
source "${HOME}"/dotfiles/aliases.bash
source "${HOME}"/dotfiles/functions.bash
# source "${HOME}"/dotfiles/slurm.bash

if command -v virtualenvwrapper_lazy.sh >/dev/null 2>&1; then
    source $(command -v virtualenvwrapper_lazy.sh)
fi

{%@@ if profile == "osmium" @@%}
# re-export
export QCPROGS="${HOME}/data/opt/apps"
export apps="${QCPROGS}"

source /usr/share/lmod/lmod/init/zsh
module use "${HOME}/modules/osmium"
{%@@ elif profile == "sodium.local" @@%}
source "${HOME}"/dotfiles/aliases_macos.bash
{%@@ endif @@%}

eval "$(direnv hook zsh)"

source "${HOME}"/dotfiles/termsupport.zsh
source "${HOME}"/dotfiles/completion.zsh
